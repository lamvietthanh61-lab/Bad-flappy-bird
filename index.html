<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Flappy Bird Pro – Lâm Việt Thành</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
    margin: 0;
    overflow: hidden;
    background: linear-gradient(#70c5ce,#a0e9f5);
    font-family: Arial, sans-serif;
}
#game-container {
    position: relative;
    width: 100vw;
    height: 100vh;
}
canvas {
    display: block;
    margin: auto;
    background: transparent;
}
#ui {
    position:absolute;
    inset:0;
    display:flex;
    justify-content:center;
    align-items:center;
    pointer-events:none;
}
.panel {
    background:white;
    padding:25px;
    border-radius:16px;
    text-align:center;
    box-shadow:0 10px 25px rgba(0,0,0,.3);
    pointer-events:auto;
}
.btn {
    background:#f59e0b;
    padding:12px 20px;
    border-radius:10px;
    color:white;
    font-weight:bold;
    margin-top:15px;
}
.score {
    position:absolute;
    top:20px;
    left:50%;
    transform:translateX(-50%);
    font-size:48px;
    color:white;
    text-shadow:3px 3px 0 black;
}
</style>
</head>

<body>

<div id="game-container">
    <canvas id="game"></canvas>
    <div class="score" id="score">0</div>

    <div id="ui">
        <div id="menu" class="panel">
            <h1 class="text-3xl font-bold text-orange-500">FLAPPY PRO</h1>
            <p>Kỷ lục: <span id="best">0</span></p>
            <button id="play" class="btn">Chơi</button>
        </div>
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scoreEl = document.getElementById("score");
const bestEl = document.getElementById("best");
const menu = document.getElementById("menu");

let W,H;
function resize(){
  W = canvas.width = Math.min(innerWidth,420);
  H = canvas.height = Math.min(innerHeight,640);
}
window.onresize = resize; resize();

let best = localStorage.getItem("best")||0;
bestEl.textContent = best;

let bird = {x:80,y:H/2,v:0};
let pipes=[];
let score=0;
let playing=false;

function reset(){
 bird.y=H/2; bird.v=0; pipes=[]; score=0;
 scoreEl.textContent=0;
}

function play(){
 reset();
 playing=true;
 menu.style.display="none";
 loop();
}

document.getElementById("play").onclick=play;
addEventListener("mousedown",()=>bird.v=-5);
addEventListener("touchstart",()=>bird.v=-5);
addEventListener("keydown",e=>{if(e.code=="Space")bird.v=-5});

function loop(){
 if(!playing) return;
 update(); draw();
 requestAnimationFrame(loop);
}

function update(){
 bird.v+=0.3;
 bird.y+=bird.v;
 if(bird.y<0||bird.y>H) gameOver();

 if(pipes.length==0||pipes[pipes.length-1].x< W-200){
   let top = Math.random()*(H-200)+50;
   pipes.push({x:W,top});
 }

 pipes.forEach(p=>p.x-=2);
 pipes=pipes.filter(p=>p.x>-60);

 pipes.forEach(p=>{
   if(80>p.x&&80<p.x+50&&(bird.y<p.top||bird.y>p.top+140))
      gameOver();
   if(!p.passed&&p.x<80){score++;p.passed=true;scoreEl.textContent=score;}
 });
}

function gameOver(){
 playing=false;
 menu.style.display="block";
 if(score>best){
   best=score;
   localStorage.setItem("best",best);
   bestEl.textContent=best;
 }
}

function draw(){
 ctx.clearRect(0,0,W,H);
 ctx.fillStyle="#70c5ce";
 ctx.fillRect(0,0,W,H);

 // bird
 ctx.fillStyle="orange";
 ctx.beginPath();
 ctx.arc(80,bird.y,15,0,Math.PI*2);
 ctx.fill();

 // pipes
 ctx.fillStyle="green";
 pipes.forEach(p=>{
   ctx.fillRect(p.x,0,50,p.top);
   ctx.fillRect(p.x,p.top+140,50,H);
 });
}
</script>
</body>
</html>




